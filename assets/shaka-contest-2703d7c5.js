var a=Object.defineProperty;var l=(s,e,i)=>e in s?a(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var o=(s,e,i)=>(l(s,typeof e!="symbol"?e+"":e,i),i);class c{constructor(){o(this,"rootLink");o(this,"uiWebSite");const e="https://workadventure.github.io/nftbiarritz-game/";this.rootLink=e}async openDiscussionWebsite(e,i=null){const r={url:`${this.rootLink}/views/${e}/discussion.html`,visible:!0,position:{vertical:"bottom",horizontal:"middle"},allowApi:!0,size:{height:"120px",width:"100%"},margin:{bottom:"80px",left:"10px",right:"10px"}};this.uiWebSite=await WA.ui.website.open(r),WA.event.on(`close-${e}`).subscribe(()=>{this.uiWebSite&&this.uiWebSite.close(),i&&i(this.uiWebSite),this.uiWebSite=void 0})}closeDiscussionWebsite(){this.uiWebSite&&this.uiWebSite.close(),this.uiWebSite=void 0}openModal(e,i){WA.ui.modal.openModal({title:e,src:`${this.rootLink}/views/${i}/modal.html`,allowApi:!0,allow:"fullscreen;camera;microphone",position:"center"})}}const n=new c;console.info("Shaka contest script loaded...");WA.onInit().then(()=>{WA.controls.disableRoomList(),WA.controls.restoreRightClick(),WA.controls.disablePlayerProximityMeeting(),WA.controls.disableMapEditor(),WA.controls.disableMicrophone(),WA.controls.disableWebcam(),new u,new p,new d,new W,new h,new b,console.info("Shaka contest script initialized...")});class t{constructor(e){this.key=e,this.init()}init(){WA.room.area.onEnter(this.key).subscribe(()=>this.onEnter()),WA.room.area.onLeave(this.key).subscribe(()=>this.onLeave())}resolve(){WA.player.state.saveVariable(this.key,!0)}onEnter(){n.openDiscussionWebsite(this.key,()=>{this.resolve(),this.onLeave()})}onLeave(){n.closeDiscussionWebsite()}}class u extends t{constructor(){super("start")}init(){WA.controls.disablePlayerControls(),this.onEnter()}resolve(){WA.controls.restorePlayerControls()}}class h extends t{constructor(){super("info1")}resolve(){}}class b extends t{constructor(){super("info2")}resolve(){}}class p extends t{constructor(){super("treasureEnigma")}resolve(){super.resolve(),n.openModal("Biarritz Map","treasureEnigma")}}class d extends t{constructor(){super("surfEnigma")}}class W extends t{constructor(){super("waveEnigma")}resolve(){super.resolve()}}
