var l=Object.defineProperty;var a=(o,e,i)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var r=(o,e,i)=>(a(o,typeof e!="symbol"?e+"":e,i),i);class c{constructor(){r(this,"_rootLink");r(this,"uiWebSite");const e="https://workadventure.github.io/nftbiarritz-game/";this._rootLink=e}async openDiscussionWebsite(e,i=null){const n={url:`${this.rootLink}/views/${e}/discussion.html`,visible:!0,position:{vertical:"bottom",horizontal:"middle"},allowApi:!0,size:{height:"120px",width:"100%"},margin:{bottom:"80px",left:"10px",right:"10px"}};this.uiWebSite=await WA.ui.website.open(n),WA.event.on(`close-${e}`).subscribe(()=>{this.uiWebSite&&this.uiWebSite.close(),i&&i(this.uiWebSite),this.uiWebSite=void 0})}closeDiscussionWebsite(){this.uiWebSite&&this.uiWebSite.close(),this.uiWebSite=void 0}openModalByView(e,i){WA.ui.modal.openModal({title:e,src:`${this.rootLink}/views/${i}/modal.html`,allowApi:!0,allow:"fullscreen;camera;microphone",position:"center"})}openModalByUrl(e,i){WA.ui.modal.openModal({title:e,src:i,allowApi:!0,allow:"fullscreen;camera;microphone",position:"center"})}get rootLink(){return this._rootLink}}const t=new c;console.info("Shaka contest script loaded...");WA.onInit().then(()=>{WA.controls.disableRoomList(),WA.controls.restoreRightClick(),WA.controls.disablePlayerProximityMeeting(),WA.controls.disableMapEditor(),WA.controls.disableMicrophone(),WA.controls.disableWebcam(),new u,new d,new b,new m,new p,new h,WA.ui.website.open({url:`${t.rootLink}/views/inventory/inventory.html`,visible:!0,position:{vertical:"bottom",horizontal:"right"},allowApi:!0,size:{height:"200px",width:"100px"},margin:{bottom:"200px",right:"0px"}}),console.info("Shaka contest script initialized...")});class s{constructor(e){this.key=e,this.init()}init(){WA.room.area.onEnter(this.key).subscribe(()=>this.onEnter()),WA.room.area.onLeave(this.key).subscribe(()=>this.onLeave())}resolve(){WA.player.state.saveVariable(this.key,!0)}onEnter(){t.openDiscussionWebsite(this.key,()=>{this.resolve(),this.onLeave()})}onLeave(){t.closeDiscussionWebsite()}}class u extends s{constructor(){super("start")}init(){WA.controls.disablePlayerControls(),this.onEnter()}resolve(){WA.controls.restorePlayerControls()}}class p extends s{constructor(){super("info1")}resolve(){}}class h extends s{constructor(){super("info2")}resolve(){}}class d extends s{constructor(){super("treasureEnigma")}resolve(){super.resolve(),t.openModalByView("Biarritz Map","treasureEnigma")}}class b extends s{constructor(){super("surfEnigma")}}class m extends s{constructor(){super("waveEnigma")}onEnter(){if(WA.player.state.surfEnigma==null||WA.player.state.surfEnigma==!1){t.openDiscussionWebsite("noBoard");return}super.onEnter()}resolve(){super.resolve(),t.openModalByUrl("SHAKA Contest form","https://docs.google.com/forms/d/e/1FAIpQLSeM4XTvLK-wLIocl8wcLoCcGu_mth-1qWfKwKZfewrrUGyIDg/viewform?embedded=true")}}
