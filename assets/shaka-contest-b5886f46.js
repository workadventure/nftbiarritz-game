var l=Object.defineProperty;var a=(i,e,t)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>(a(i,typeof e!="symbol"?e+"":e,t),t);class c{constructor(){r(this,"_rootLink");r(this,"uiWebSite");const e="https://workadventure.github.io/nftbiarritz-game/";this._rootLink=e}async openDiscussionWebsite(e,t=null){const n={url:`${this.rootLink}/views/${e}/discussion.html`,visible:!0,position:{vertical:"bottom",horizontal:"middle"},allowApi:!0,size:{height:"120px",width:"100%"},margin:{bottom:"80px",left:"10px",right:"10px"}};this.uiWebSite=await WA.ui.website.open(n),WA.event.on(`close-${e}`).subscribe(()=>{this.uiWebSite&&this.uiWebSite.close(),t&&t(this.uiWebSite),this.uiWebSite=void 0})}closeDiscussionWebsite(){this.uiWebSite&&this.uiWebSite.close(),this.uiWebSite=void 0}openModal(e,t){WA.ui.modal.openModal({title:e,src:`${this.rootLink}/views/${t}/modal.html`,allowApi:!0,allow:"fullscreen;camera;microphone",position:"center"})}get rootLink(){return this._rootLink}}const o=new c;console.info("Shaka contest script loaded...");WA.onInit().then(()=>{WA.controls.disableRoomList(),WA.controls.restoreRightClick(),WA.controls.disablePlayerProximityMeeting(),WA.controls.disableMapEditor(),WA.controls.disableMicrophone(),WA.controls.disableWebcam(),new u,new b,new d,new W,new h,new p,WA.ui.website.open({url:`${o.rootLink}/views/inventory/inventory.html`,visible:!0,position:{vertical:"bottom",horizontal:"right"},allowApi:!0,size:{height:"200px",width:"100px"},margin:{bottom:"180px",right:"10px"}}),console.info("Shaka contest script initialized...")});class s{constructor(e){this.key=e,this.init()}init(){WA.room.area.onEnter(this.key).subscribe(()=>this.onEnter()),WA.room.area.onLeave(this.key).subscribe(()=>this.onLeave())}resolve(){WA.player.state.saveVariable(this.key,!0)}onEnter(){o.openDiscussionWebsite(this.key,()=>{this.resolve(),this.onLeave()})}onLeave(){o.closeDiscussionWebsite()}}class u extends s{constructor(){super("start")}init(){WA.controls.disablePlayerControls(),this.onEnter()}resolve(){WA.controls.restorePlayerControls()}}class h extends s{constructor(){super("info1")}resolve(){}}class p extends s{constructor(){super("info2")}resolve(){}}class b extends s{constructor(){super("treasureEnigma")}resolve(){super.resolve(),o.openModal("Biarritz Map","treasureEnigma")}}class d extends s{constructor(){super("surfEnigma")}}class W extends s{constructor(){super("waveEnigma")}resolve(){super.resolve()}}
